<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>1~50 圓形轉盤 (精準對齊版)</title>
<style>
body {
text-align: center;
font-family: Arial, sans-serif;
background: #f9fafb;
margin-top: 36px;
}
#roulette-container {
position: relative;
display: inline-block;
}
#arrow {
position: absolute;
top: -2px;
left: 50%;
width: 0;
height: 0;
border-left: 15px solid transparent;
border-right: 15px solid transparent;
border-top: 30px solid #e74c3c;
transform: translateX(-50%);
z-index: 10;
display: block;
}
#spin-btn {
margin-top: 32px;
padding: 12px 32px;
font-size: 1.2rem;
cursor: pointer;
border-radius: 8px;
border: none;
background: #3178c6;
color: #fff;
transition: background 0.2s;
}
#spin-btn:hover {
background: #25558a;
}
#spin-btn:disabled {
background: #aaa;
cursor: not-allowed;
}
#result {
margin-top: 32px;
font-size: 1.7rem;
font-weight: bold;
color: #3178c6;
min-height: 1.7rem;
}



svg {



display: block;



margin: auto;



cursor: pointer;



user-select: none;



background: #fff;



border-radius: 50%;



box-shadow: 0 6px 32px #9992;



transform-origin: 200px 200px;



}



#card-image {



margin-top: 30px;



max-width: 90%;



max-height: 400px;



border-radius: 12px;



border: 3px solid #3178c6;



box-shadow: 0 4px 12px #9995;



display: inline-block; /* 預設顯示 0.jpg */



}



</style>



</head>



<body>



<h2>1~50 圓形轉盤與圖片展示 (精準對齊版)</h2>






<div id="roulette-container">



<div id="arrow"></div>



<svg id="wheel" width="400" height="400" viewBox="0 0 400 400"></svg>



</div>







<br>



<button id="spin-btn">轉動轉盤 Spin</button>



<div id="result">請點擊按鈕開始轉動</div>






<img id="card-image" src="image/0.JPG" alt="牌卡圖片" />







<script>



const sectors = 50;



const colors = ["#eaeaea", "#efebc2"];



const wheel = document.getElementById('wheel');



const cardImage = document.getElementById('card-image');



const resultDiv = document.getElementById('result');



const spinBtn = document.getElementById('spin-btn');







// 產生圖片路徑



const imageLinks = [];



for (let i = 1; i <= 50; i++) {



imageLinks.push(`image/${i}.JPG`);



}







// 洗牌函式



function shuffleArray(array) {



let shuffled = [...array];



for (let i = shuffled.length - 1; i > 0; i--) {



const j = Math.floor(Math.random() * (i + 1));



[shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];



}



return shuffled;



}







// 繪製轉盤



function drawWheel() {



let numbers = Array.from({ length: sectors }, (_, i) => i + 1);



let shuffledNumbers = shuffleArray(numbers);







let r = 180, cx = 200, cy = 200;



let deg = 360 / sectors; // 7.2 度



let current = 0;



let svgStr = '';






// 注意：這裡繪製時，第一個扇區 (index 0) 是從 12 點鐘方向開始順時針繪製



for (let i = 0; i < sectors; i++) {



let start = (current - 90) * Math.PI / 180;



let end = (current + deg - 90) * Math.PI / 180;



let x1 = cx + r * Math.cos(start);



let y1 = cy + r * Math.sin(start);



let x2 = cx + r * Math.cos(end);



let y2 = cy + r * Math.sin(end);



let largeArc = deg > 180 ? 1 : 0;







svgStr += `



<path d="M${cx},${cy} L${x1},${y1} A${r},${r} 0 ${largeArc},1 ${x2},${y2} z"



fill="${colors[i % 2]}"



stroke="#ccc"



stroke-width="1"/>



<text x="${cx + 140 * Math.cos((current + deg / 2 - 90) * Math.PI / 180)}"



y="${cy + 140 * Math.sin((current + deg / 2 - 90) * Math.PI / 180)}"



font-size="18"



fill="#3178c6"



text-anchor="middle"



dy="7"



transform="rotate(${current + deg / 2 + 90}, ${cx + 140 * Math.cos((current + deg / 2 - 90) * Math.PI / 180)}, ${cy + 140 * Math.sin((current + deg / 2 - 90) * Math.PI / 180)})">



${shuffledNumbers[i]}



</text>`;



current += deg;



}



wheel.innerHTML = svgStr;



return shuffledNumbers;



}







let randomNumbers = drawWheel();



let isSpinning = false;







spinBtn.onclick = function () {



if (isSpinning) return;



isSpinning = true;



spinBtn.disabled = true;



resultDiv.textContent = "準備發射...";







// 1. 先歸零 (無動畫)



wheel.style.transition = "none";



wheel.style.transform = "rotate(0deg)";







// 2. 稍微延遲後開始旋轉，確保歸零動作被執行



setTimeout(() => {



// --- 隨機抽出一個號碼 ---



let resultNum = Math.floor(Math.random() * sectors) + 1;






// --- 找出該號碼在轉盤上的位置 (Index) ---



// index 0 代表繪製在 12點鐘~12點01分 的那個扇區



let index = randomNumbers.indexOf(resultNum);






// --- 計算角度 ---



let sectorDegree = 360 / sectors;






// 計算該扇區中心點相對於 12 點鐘 (0度) 順時針偏了多少度



// 例如 index 0 的中心是 3.6 度



let currentAngleFromTop = index * sectorDegree + sectorDegree / 2;







// --- 設定旋轉目標 ---



// 因為目標在順時針方向 X 度，我們要逆時針轉 X 度才能讓它回到頂部



// 加上 5 圈 (1800度) 增加視覺效果



let totalRotation = 360 * 5 + currentAngleFromTop;







// --- 執行旋轉 ---



wheel.style.transition = "transform 4s cubic-bezier(.17,.79,.37,.99)";



wheel.style.transform = `rotate(-${totalRotation}deg)`;







// --- 顯示結果 ---



setTimeout(() => {



resultDiv.textContent = "指向號碼 Number: " + resultNum;



cardImage.src = imageLinks[resultNum - 1];



cardImage.style.display = "inline-block";






isSpinning = false;



spinBtn.disabled = false;



}, 4000);







}, 50);



};



</script>



</body>



</html>
